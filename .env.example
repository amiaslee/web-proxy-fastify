# =========================================
# Server Configuration
# =========================================
HOST=0.0.0.0
PORT=3001

# =========================================
# IP Access Control
# =========================================
# Control which IPs can access the proxy
# Use '*' to allow all IPs, or specify a comma-separated list
# Examples: 
#   - 127.0.0.1,::1 (localhost only)
#   - 192.168.1.0/24 (entire subnet)
#   - * (all IPs)
ALLOWED_IPS=127.0.0.1,::1

# Block specific IPs (comma-separated)
BLOCKED_IPS=

# =========================================
# Rate & Bandwidth Limits (Global Defaults)
# =========================================
# MAX_REQ_PER_MIN: Maximum requests per minute per IP
# MAX_BYTES_PER_DAY: Daily bandwidth quota per IP
# 
# Supports units: KB, MB, GB, TB (case insensitive)
# Use '*' for unlimited
# Examples:
#   MAX_REQ_PER_MIN=60        (60 requests/minute)
#   MAX_REQ_PER_MIN=*         (unlimited)
#   MAX_BYTES_PER_DAY=1GB     (1 gigabyte/day)
#   MAX_BYTES_PER_DAY=*       (unlimited)
MAX_REQ_PER_MIN=60
MAX_BYTES_PER_DAY=1GB

# =========================================
# Database
# =========================================
DATABASE_URL=postgresql://postgres:postgres@localhost:5433/fastify_proxy

# =========================================
# Deployment Notes
# =========================================
# For production, use Nginx for SSL termination
# Nginx should proxy to http://localhost:3001
# Example Nginx config in docs/nginx.conf

# =========================================
# Per-IP Custom Limits (Tier 2)
# =========================================
# Override global limits for specific IPs or subnets
# Format: IP_LIMITS<N>=<ip>,<requests_per_min>,<bytes_per_day>
# 
# Supports:
#   - Individual IPs: 127.0.0.1
#   - CIDR ranges: 192.168.1.0/24
#   - Bandwidth units: KB, MB, GB, TB
#   - Unlimited: Use '*' for either rate or bandwidth
#
# Examples:
#   IP_LIMITS1=127.0.0.1,1000,10GB     (VIP user)
#   IP_LIMITS2=192.168.1.100,*,*       (unlimited for specific IP)
#   IP_LIMITS3=192.168.2.0/24,30,1GB   (entire subnet)
#
# Leave empty to use global defaults
IP_LIMITS1=
IP_LIMITS2=

# =========================================
# Admin System
# =========================================
# ADMIN_SECRET: Secret key for admin API access
# ADMIN_API_PREFIX: URL prefix for admin endpoints
ADMIN_SECRET=your-admin-secret-key-change-this
ADMIN_API_PREFIX=/admin

# =========================================
# Card-Key System (Tier 3 - Recharged Users)
# =========================================
# Enable card-based recharge system
CARD_KEY_ENABLED=true

# Default values for generated card keys
# CARD_KEY_DEFAULT_BANDWIDTH: Bandwidth quota per card
# CARD_KEY_DEFAULT_RATE: Rate limit (requests/minute) per card
# CARD_KEY_DEFAULT_VALID_DAYS: Card validity period in days
#
# Supports units and unlimited:
#   CARD_KEY_DEFAULT_BANDWIDTH=10GB   (10 gigabytes)
#   CARD_KEY_DEFAULT_BANDWIDTH=*      (unlimited)
#   CARD_KEY_DEFAULT_RATE=300         (300 requests/minute)
#   CARD_KEY_DEFAULT_RATE=*           (unlimited)
CARD_KEY_DEFAULT_BANDWIDTH=10GB
CARD_KEY_DEFAULT_RATE=300
CARD_KEY_DEFAULT_VALID_DAYS=30
